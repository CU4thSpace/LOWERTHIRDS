<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lower Third JSON Generator</title>
<style>
  body { font-family: sans-serif; padding: 20px; max-width: 700px; }
  .entry { margin-bottom: 10px; padding: 10px; border: 1px solid #ccc; }
  input { width: 48%; padding: 6px; margin-right: 2%; }
  button { padding: 8px 12px; margin-top: 10px; margin-right: 10px; }
  textarea { width: 100%; height: 200px; margin-top: 20px; }
  #copyStatus { margin-left: 10px; color: green; font-weight: bold; }
</style>
</head>
<body>

<h2>Lower Third JSON Generator</h2>

<div id="entries"></div>

<button onclick="addEntry()">Add Person</button>
<button onclick="generateJSON()">Generate JSON</button>
<button onclick="copyJSON()">Copy JSON</button>
<span id="copyStatus"></span>

<textarea id="output" placeholder="Generated JSON will appear here..."></textarea>

<script>
let count = 0;
const maxEntries = 10;

function addEntry(name = "", title = "") {
  if (count >= maxEntries) {
    alert("Maximum of 10 people reached");
    return;
  }

  const container = document.getElementById("entries");

  const div = document.createElement("div");
  div.className = "entry";
  div.innerHTML = `
    <input type="text" placeholder="Name" class="name" value="${name}">
    <input type="text" placeholder="Title (optional)" class="title" value="${title}">
  `;

  container.appendChild(div);
  count++;
}

function generateJSON() {
  const names = document.querySelectorAll(".name");
  const titles = document.querySelectorAll(".title");

  const entries = [];

  for (let i = 0; i < names.length; i++) {
    const name = names[i].value.trim();
    const title = titles[i].value.trim();

    if (!name) continue;

    entries.push({
      name: name,
      title: title
    });
  }

  const data = {
    updated: new Date().toISOString(),
    entries: entries
  };

  document.getElementById("output").value =
    JSON.stringify(data, null, 2);

  document.getElementById("copyStatus").textContent = "";
}

function copyJSON() {
  const output = document.getElementById("output");
  const status = document.getElementById("copyStatus");

  if (!output.value.trim()) {
    alert("Generate JSON first");
    return;
  }

  navigator.clipboard.writeText(output.value)
    .then(() => {
      status.textContent = "Copied!";
      setTimeout(() => status.textContent = "", 2000);
    })
    .catch(err => {
      alert("Copy failed. Try manual copy.");
      console.error(err);
    });
}

// Start with 3 blank rows
addEntry();
addEntry();
addEntry();
</script>

</body>
</html>
